<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Device Management - P2Skating</title>
  <link rel="stylesheet" href="/static/css/common.css">
  <style>
    .page.narrow { max-width: 1000px; }
    .panel.large { padding: 16px; }
    .device-list { margin-top: 16px; }
    .device-item { padding: 12px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 8px; background: #fafafa; }
    .device-item:hover { background: #f0f0f0; }
    .device-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .device-name { font-weight: bold; font-size: 16px; }
    .device-mac { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; color: #666; font-size: 13px; }
    .device-actions { display: flex; gap: 8px; }
    .device-actions button { padding: 4px 12px; font-size: 12px; }
    .scan-results { margin-top: 12px; padding: 12px; background: #f5f5f5; border-radius: 4px; }
    .scan-item { padding: 8px; margin-bottom: 4px; background: white; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
    .scan-item button { padding: 4px 12px; font-size: 12px; }
  </style>
</head>
<body data-nav-page="devices">
  <div id="navContainer"></div>

  <h2>Device Management</h2>

  <div id="messageContainer"></div>

  <div class="page narrow">
    <!-- Add/Edit Device Form -->
    <div class="panel large">
      <h3 id="formTitle">Add Device</h3>
      <form id="deviceForm">
        <input type="hidden" id="deviceId" value="" />
        <div class="form-group">
          <label for="macAddress">MAC Address:</label>
          <input type="text" id="macAddress" placeholder="74:92:BA:10:F9:00" required pattern="([0-9A-Fa-f]{2}:){5}[0-9A-Fa-f]{2}" />
        </div>
        <div class="form-group">
          <label for="deviceName">Device Name:</label>
          <input type="text" id="deviceName" placeholder="Sensor 1" required />
        </div>
        <div class="btnRow">
          <button type="submit" class="primary" id="saveBtn">Save Device</button>
          <button type="button" id="cancelBtn" class="hidden">Cancel</button>
          <button type="button" id="scanBtn">Scan for Devices</button>
        </div>
      </form>
      <div id="scanResults" class="scan-results hidden">
        <h4>Scanned Devices</h4>
        <div id="scanList"></div>
      </div>
    </div>

    <!-- Device List -->
    <div class="panel large">
      <h3>Registered Devices</h3>
      <div id="deviceList" class="device-list">
        <p>Loading devices...</p>
      </div>
    </div>
  </div>

  <script src="/static/js/common.js"></script>
  <script src="/static/js/devices.js"></script>
</body>
</html>
